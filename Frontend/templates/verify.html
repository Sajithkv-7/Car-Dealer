<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTP Verify</title>
    <link rel="stylesheet" href="carpay.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>

<body>
    <nav class="navbar navbar-light bg-dark py-4">
        <div class="container-fluid">
            <div class="logo">
                <a href="#" class="logo">
                    <span class="fa fa-car"></span> <span class="title">CAR DEALER</span>
                </a>
            </div>
        </div>
      </nav>
    <section>
        <br><br>
        <div class="box">
            <h4 style="color:white; font-size:30px;font-weight:600;">Enter OTP Code</h4>
<!--            <form method="post">-->
<!--                {% csrf_token %}-->
                <div class="input-field">
                    <input type="text" id="otp" name="otp"/>
                </div><br>
<!--                <div class="input-field">-->
<!--                    <a href="#"><button type="submit" class="btn btn-primary" style="background:#ff9269; font-weight:600; border:none;">Verify OTP</button></a>-->
<!--                </div>-->
<!--            </form>-->
        </div>
    </section>


    <script>
        $('#otp').change(function(){
            let otp = $('#otp').val();
            console.log("OTP :",otp)

            if (otp == '{{otp}}'){
                console.log("OTP Matched")

                $.ajax({
                    type: "POST",
                    url: '{% url "VerifyOtp" %}',
                    data: {'otp': otp,'first_name':"{{first_name}}",'last_name':"{{last_name}}",'username':"{{username}}",'email':"{{email}}",'password1':"{{password1}}",'password2':"{{password2}}"},
                    success: function(data){
                        console.log("OTP matched")
                        window.location.href = '{% url 'user_login' %}'
                    }
                })
            }
        })
</script>
    <style>
        body{
    margin: 0;
    padding: 0;
    font-family: sans-serif;
    background-image: url('https://images.unsplash.com/photo-1498887960847-2a5e46312788?q=80&w=1469&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-size: cover;
}

section{
    padding-top: 15px;
    padding-left: 360px;

    text-align: center;
}
.box{
    position: relative;
    max-width: 500px;
    padding: 50px;
    box-shadow: 0 5px 15px rgba(0,0,0,.5);
    background: rgba(255,255,255,.2);
    border-radius: 10px;
    margin-left: 54px;
}
.box h2{
    color: white;
    font-weight: 600;
}

.logo{
    width: 500px;
    height: 30px;
    font-size: 30px;
    text-decoration: none;
    color: #ff9269;
    font-weight: 600;
    margin-left: 32px;
    font-weight: 600;
}
    </style>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>

</html>



  <style>

  </style>
<!--  <script>-->
<!--       const inputs = document.querySelectorAll("input"),-->
<!--  button = document.querySelector("button");-->

<!--// iterate over all inputs-->
<!--inputs.forEach((input, index1) => {-->
<!--  input.addEventListener("keyup", (e) => {-->
<!--    // This code gets the current input element and stores it in the currentInput variable-->
<!--    // This code gets the next sibling element of the current input element and stores it in the nextInput variable-->
<!--    // This code gets the previous sibling element of the current input element and stores it in the prevInput variable-->
<!--    const currentInput = input,-->
<!--      nextInput = input.nextElementSibling,-->
<!--      prevInput = input.previousElementSibling;-->

<!--    // if the value has more than one character then clear it-->
<!--    if (currentInput.value.length > 6) {-->
<!--      currentInput.value = "";-->
<!--      return;-->
<!--    }-->
<!--    // if the next input is disabled and the current value is not empty-->
<!--    //  enable the next input and focus on it-->
<!--    if (nextInput && nextInput.hasAttribute("disabled") && currentInput.value !== "") {-->
<!--      nextInput.removeAttribute("disabled");-->
<!--      nextInput.focus();-->
<!--    }-->

<!--    // if the backspace key is pressed-->
<!--    if (e.key === "Backspace") {-->
<!--      // iterate over all inputs again-->
<!--      inputs.forEach((input, index2) => {-->
<!--        // if the index1 of the current input is less than or equal to the index2 of the input in the outer loop-->
<!--        // and the previous element exists, set the disabled attribute on the input and focus on the previous element-->
<!--        if (index1 <= index2 && prevInput) {-->
<!--          input.setAttribute("disabled", true);-->
<!--          input.value = "";-->
<!--          prevInput.focus();-->
<!--        }-->
<!--      });-->
<!--    }-->
<!--    //if the fourth input( which index number is 3) is not empty and has not disable attribute then-->
<!--    //add active class if not then remove the active class.-->
<!--    if (!inputs[3].disabled && inputs[3].value !== "") {-->
<!--      button.classList.add("active");-->
<!--      return;-->
<!--    }-->
<!--    button.classList.remove("active");-->
<!--  });-->
<!--});-->

<!--//focus the first input which index is 0 on window load-->
<!--window.addEventListener("load", () => inputs[0].focus());-->
<!--  </script>-->
  </body>
</html>


